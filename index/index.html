<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoGrow Remote Control</title>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        :root {
            --primary-color: #27ae60;
            --secondary-color: #2c3e50;
            --background-color: #f8f9fa;
            --card-color: #ffffff;
            --text-color: #333333;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background-color);
            color: var(--text-color);
            padding: 20px;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), #2ecc71);
            color: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }
        
        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .card {
            background: var(--card-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .card-title i {
            margin-right: 10px;
            font-size: 1.4rem;
        }
        
        .status-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .status-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            min-width: 100px;
        }
        
        .status-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .status-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-secondary {
            background: #3498db;
            color: white;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .device-id {
            background: #f1f8ff;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px dashed #3498db;
        }
        
        .device-id input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            background: #ffeaea;
            color: #c0392b;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #c0392b;
        }
        
        .success {
            background: #e8f6ef;
            color: #27ae60;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #27ae60;
        }
        
        .info {
            background: #e8f4fc;
            color: #2980b9;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2980b9;
        }
        
        .refresh-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 1000;
        }
        
        .settings-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .status-item {
                min-width: 80px;
                padding: 10px;
            }
            
            .status-value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="header">
            <h1>üå± EcoGrow Remote</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –º–∏—Ä–∞</p>
            <div id="connectionStatus" class="info">
                üîÑ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...
            </div>
        </div>
        
        <!-- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ -->
        <div class="card" id="deviceIdForm">
            <div class="card-title">üì± –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
            <div class="device-id">
                <p>–í–≤–µ–¥–∏—Ç–µ ID –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∏–∑ Telegram):</p>
                <input type="text" id="deviceIdInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 6712996693">
                <button class="btn btn-primary" onclick="connectDevice()" style="width: 100%; margin-top: 10px;">
                    –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                </button>
            </div>
            <p style="margin-top: 15px; font-size: 0.9rem; color: #666;">
                ID –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∏–≤ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É <code>/status</code> –≤ Telegram
            </p>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫—Ä—ã—Ç –¥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è) -->
        <div id="mainInterface" style="display: none;">
            <!-- –í–ª–∞–∂–Ω–æ—Å—Ç—å -->
            <div class="card">
                <div class="card-title">üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ—á–≤—ã</div>
                <div class="status-display">
                    <div class="status-item">
                        <div class="status-value" id="currentMoisture">--%</div>
                        <div class="status-label">–¢–µ–∫—É—â–∞—è</div>
                    </div>
                    <div class="status-item">
                        <div class="status-value" id="moistureThreshold">50%</div>
                        <div class="status-label">–ü–æ—Ä–æ–≥</div>
                    </div>
                </div>
                
                <div class="settings-panel">
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>–ü–æ—Ä–æ–≥ –ø–æ–ª–∏–≤–∞:</span>
                            <span id="thresholdValue">50%</span>
                        </div>
                        <input type="range" id="moistureSlider" min="10" max="90" step="1" value="50">
                    </div>
                    <button class="btn btn-secondary" onclick="updateThreshold()" style="width: 100%;">
                        –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥
                    </button>
                </div>
            </div>
            
            <!-- –ù–∞—Å–æ—Å -->
            <div class="card">
                <div class="card-title">üö∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å–æ—Å–æ–º</div>
                <div class="control-panel">
                    <button class="btn btn-success" onclick="sendCommand('pump', 'on')">
                        üíß –í–∫–ª—é—á–∏—Ç—å
                    </button>
                    <button class="btn btn-danger" onclick="sendCommand('pump', 'off')">
                        ‚èπÔ∏è –í—ã–∫–ª—é—á–∏—Ç—å
                    </button>
                </div>
                <div class="control-panel">
                    <button class="btn btn-primary" onclick="sendCommand('pump_auto', '')" style="grid-column: span 2;">
                        üîß –ê–≤—Ç–æ—Ä–µ–∂–∏–º
                    </button>
                </div>
                <div id="pumpStatus" class="info" style="margin-top: 15px;">
                    –°—Ç–∞—Ç—É—Å: –ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω
                </div>
            </div>
            
            <!-- –°–≤–µ—Ç -->
            <div class="card">
                <div class="card-title">üí° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º</div>
                <div class="control-panel">
                    <button class="btn btn-success" onclick="sendCommand('light', 'on')">
                        üí° –í–∫–ª—é—á–∏—Ç—å
                    </button>
                    <button class="btn btn-danger" onclick="sendCommand('light', 'off')">
                        üåô –í—ã–∫–ª—é—á–∏—Ç—å
                    </button>
                </div>
                <div class="control-panel">
                    <button class="btn btn-primary" onclick="sendCommand('light_auto', '')" style="grid-column: span 2;">
                        üîß –ê–≤—Ç–æ—Ä–µ–∂–∏–º
                    </button>
                </div>
                <div id="lightStatus" class="info" style="margin-top: 15px;">
                    –°—Ç–∞—Ç—É—Å: –ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω
                </div>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="card">
                <div class="card-title">üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                <div class="status-display">
                    <div class="status-item">
                        <div class="status-value" id="totalWaterings">0</div>
                        <div class="status-label">–ü–æ–ª–∏–≤–æ–≤</div>
                    </div>
                    <div class="status-item">
                        <div class="status-value" id="totalLightHours">0—á</div>
                        <div class="status-label">–°–≤–µ—Ç–∞</div>
                    </div>
                </div>
                <div id="systemTime" class="info" style="margin-top: 15px;">
                    –í—Ä–µ–º—è —Å–∏—Å—Ç–µ–º—ã: --:--
                </div>
            </div>
        </div>
        
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="messageContainer"></div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
    <button class="refresh-btn" onclick="fetchData()">üîÑ</button>
    
    <script>
        // Telegram Web App
        let tg = window.Telegram.WebApp;
        let deviceId = null;
        let botToken = "8365221747:AAEskXtc6T-IhEik718wJJ9x-vz_TOh26tw";
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        function initTelegram() {
            if (typeof tg !== 'undefined') {
                tg.expand();
                tg.BackButton.hide();
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram
                let initData = tg.initDataUnsafe;
                if (initData.user) {
                    console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram:", initData.user);
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ device_id –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
                let startParam = tg.initDataUnsafe.start_param;
                if (startParam) {
                    deviceId = startParam;
                    connectDevice();
                }
            }
        }
        
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
        function connectDevice() {
            let inputId = document.getElementById('deviceIdInput').value.trim();
            if (inputId) {
                deviceId = inputId;
                localStorage.setItem('ecogrow_device_id', deviceId);
                
                document.getElementById('deviceIdForm').style.display = 'none';
                document.getElementById('mainInterface').style.display = 'block';
                document.getElementById('connectionStatus').className = 'success';
                document.getElementById('connectionStatus').innerHTML = '‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É: ' + deviceId;
                
                fetchData();
                startDataPolling();
            } else {
                showMessage('–í–≤–µ–¥–∏—Ç–µ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞', 'error');
            }
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã
        async function sendCommand(cmd, param) {
            if (!deviceId) {
                showMessage('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É', 'error');
                return;
            }
            
            showMessage('–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã...', 'info');
            
            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Telegram Bot API
                const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
                const text = `WEBAPP:${cmd}=${param}`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: deviceId,
                        text: text,
                        parse_mode: "HTML"
                    })
                });
                
                const data = await response.json();
                
                if (data.ok) {
                    showMessage('‚úÖ –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', 'success');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(fetchData, 2000);
                } else {
                    showMessage('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + data.description, 'error');
                }
            } catch (error) {
                showMessage('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message, 'error');
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        async function fetchData() {
            if (!deviceId) return;
            
            try {
                // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Telegram Bot API
                const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: deviceId,
                        text: "/webapp_data",
                        parse_mode: "HTML"
                    })
                });
                
                const data = await response.json();
                
                if (data.ok && data.result.text && data.result.text.startsWith('DATA:')) {
                    const jsonData = JSON.parse(data.result.text.substring(5));
                    updateUI(jsonData);
                    showMessage('‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'success');
                } else {
                    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥: –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –µ—Å–ª–∏ ESP –¥–æ—Å—Ç—É–ø–µ–Ω
                    tryAlternativeDataFetch();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', error);
                tryAlternativeDataFetch();
            }
        }
        
        // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        async function tryAlternativeDataFetch() {
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é (–µ—Å–ª–∏ ESP –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)
            const localUrls = [
                `http://ecogrow.local/state`,
                `http://192.168.1.100/state`,
                `http://${window.location.hostname}/state`
            ];
            
            for (let url of localUrls) {
                try {
                    const response = await fetch(url);
                    if (response.ok) {
                        const data = await response.json();
                        updateUI(data);
                        showMessage('‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞–ø—Ä—è–º—É—é', 'success');
                        return;
                    }
                } catch (e) {
                    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π URL
                }
            }
            
            showMessage('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ', 'error');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI(data) {
            // –í–ª–∞–∂–Ω–æ—Å—Ç—å
            if (data.moisture !== undefined) {
                document.getElementById('currentMoisture').textContent = data.moisture + '%';
            }
            
            if (data.moisture_threshold !== undefined) {
                document.getElementById('moistureThreshold').textContent = data.moisture_threshold + '%';
                document.getElementById('thresholdValue').textContent = data.moisture_threshold + '%';
                document.getElementById('moistureSlider').value = data.moisture_threshold;
            }
            
            // –°—Ç–∞—Ç—É—Å –Ω–∞—Å–æ—Å–∞ –∏ —Å–≤–µ—Ç–∞
            if (data.pump !== undefined) {
                document.getElementById('pumpStatus').innerHTML = 
                    `–°—Ç–∞—Ç—É—Å: <strong>${data.pump ? '–í–ö–õ–Æ–ß–ï–ù' : '–í–´–ö–õ–Æ–ß–ï–ù'}</strong>`;
            }
            
            if (data.light !== undefined) {
                document.getElementById('lightStatus').innerHTML = 
                    `–°—Ç–∞—Ç—É—Å: <strong>${data.light ? '–í–ö–õ–Æ–ß–ï–ù' : '–í–´–ö–õ–Æ–ß–ï–ù'}</strong>`;
            }
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            if (data.total_waterings !== undefined) {
                document.getElementById('totalWaterings').textContent = data.total_waterings;
            }
            
            if (data.total_light_hours !== undefined) {
                document.getElementById('totalLightHours').textContent = data.total_light_hours + '—á';
            }
            
            // –í—Ä–µ–º—è
            if (data.current_time) {
                document.getElementById('systemTime').innerHTML = 
                    `–í—Ä–µ–º—è —Å–∏—Å—Ç–µ–º—ã: <strong>${data.current_time}</strong>`;
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
        function updateThreshold() {
            const value = document.getElementById('moistureSlider').value;
            sendCommand('threshold', value);
        }
        
        // –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type = 'info') {
            const container = document.getElementById('messageContainer');
            const message = document.createElement('div');
            message.className = type;
            message.innerHTML = text;
            message.style.animation = 'fadeIn 0.3s';
            
            container.appendChild(message);
            
            // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                message.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    if (message.parentNode) {
                        container.removeChild(message);
                    }
                }, 300);
            }, 5000);
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        let pollingInterval = null;
        function startDataPolling() {
            if (pollingInterval) clearInterval(pollingInterval);
            pollingInterval = setInterval(fetchData, 10000); // –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            initTelegram();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π device_id
            const savedDeviceId = localStorage.getItem('ecogrow_device_id');
            if (savedDeviceId) {
                deviceId = savedDeviceId;
                document.getElementById('deviceIdInput').value = savedDeviceId;
            }
            
            // –°—Ç–∏–ª–∏ –∞–Ω–∏–º–∞—Ü–∏–π
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(-10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fadeOut {
                    from { opacity: 1; transform: translateY(0); }
                    to { opacity: 0; transform: translateY(-10px); }
                }
            `;
            document.head.appendChild(style);
            
            // –ï—Å–ª–∏ device_id —É–∂–µ –µ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
            if (deviceId && deviceId !== "null") {
                connectDevice();
            }
        };
    </script>
</body>
</html>
