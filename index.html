<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoGrow Assistant - –°–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞</title>
    
    <!-- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è CSP –¥–ª—è Firebase -->
    <meta http-equiv="Content-Security-Policy" 
          content="
          default-src 'self';
          script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.gstatic.com https://*.firebaseio.com https://*.googleapis.com https://cdn.jsdelivr.net;
          style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
          font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com data:;
          connect-src 'self' https://*.firebaseio.com https://*.googleapis.com wss://*.firebaseio.com ws://*.firebaseio.com https://cdn.jsdelivr.net https://api.telegram.org;
          img-src 'self' data: https:;
          frame-src 'self' https://*.firebaseio.com;
          ">
    
    <!-- –ò–∫–æ–Ω–∫–∏ –∏ —à—Ä–∏—Ñ—Ç—ã -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto+Mono:wght@300;400&display=swap">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-theme">
    <!-- Preloader -->
    <div class="preloader">
        <div class="preloader-content">
            <div class="leaf-spinner">
                <div class="leaf leaf1"></div>
                <div class="leaf leaf2"></div>
                <div class="leaf leaf3"></div>
            </div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ EcoGrow Assistant...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-seedling"></i>
                        <h1>EcoGrow<span>Assistant</span></h1>
                    </div>
                    <div class="creator-info">
                        <p><i class="fas fa-user-graduate"></i> –ö—É–ø—á–µ–Ω—è –ï–≤–≥–µ–Ω–∏–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á</p>
                        <p><i class="fas fa-star"></i> –£—á–µ–Ω–∏–∫ 9 –∫–ª–∞—Å—Å–∞</p>
                    </div>
                </div>
                
                <div class="header-controls">
                    <div class="connection-status">
                        <div class="status-indicator" id="connectionStatus">
                            <span class="status-dot"></span>
                            <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
                        </div>
                        <div class="last-update" id="lastUpdate">--:--:--</div>
                    </div>
                    
                    <div class="theme-switch">
                        <label class="switch">
                            <input type="checkbox" id="themeToggle" checked>
                            <span class="slider">
                                <i class="fas fa-sun"></i>
                                <i class="fas fa-moon"></i>
                            </span>
                        </label>
                    </div>
                    
                    <button class="sleep-mode-btn" id="sleepModeBtn">
                        <i class="fas fa-moon"></i>
                        –†–µ–∂–∏–º —Å–Ω–∞
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Top Stats Row -->
            <div class="top-stats-row">
                <div class="stat-card primary">
                    <div class="stat-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="stat-content">
                        <h3>–í–ª–∞–∂–Ω–æ—Å—Ç—å</h3>
                        <div class="stat-value" id="moistureValue">--%</div>
                        <div class="stat-trend">
                            <span id="moistureTrend">‚Üó –ù–æ—Ä–º–∞</span>
                        </div>
                    </div>
                    <div class="stat-graph">
                        <canvas id="miniMoistureChart" width="80" height="40"></canvas>
                    </div>
                </div>
                
                <div class="stat-card secondary">
                    <div class="stat-icon">
                        <i class="fas fa-temperature-high"></i>
                    </div>
                    <div class="stat-content">
                        <h3>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h3>
                        <div class="stat-value" id="temperatureValue">--¬∞C</div>
                        <div class="stat-subtext">–û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 22-26¬∞C</div>
                    </div>
                </div>
                
                <div class="stat-card warning">
                    <div class="stat-icon">
                        <i class="fas fa-sun"></i>
                    </div>
                    <div class="stat-content">
                        <h3>–°–≤–µ—Ç</h3>
                        <div class="stat-value" id="lightStatus">–í–´–ö–õ</div>
                        <div class="stat-subtext" id="lightTimer">--:--</div>
                    </div>
                </div>
                
                <div class="stat-card success">
                    <div class="stat-icon">
                        <i class="fas fa-water"></i>
                    </div>
                    <div class="stat-content">
                        <h3>–ù–∞—Å–æ—Å</h3>
                        <div class="stat-value" id="pumpStatus">–í–´–ö–õ</div>
                        <div class="stat-subtext" id="nextWatering">--:--</div>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="content-grid">
                <!-- Left Column -->
                <div class="left-column">
                    <!-- Moisture Chart -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h2><i class="fas fa-chart-line"></i> –ì—Ä–∞—Ñ–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏</h2>
                            <div class="time-range">
                                <button class="time-btn active" data-range="1h">1—á</button>
                                <button class="time-btn" data-range="6h">6—á</button>
                                <button class="time-btn" data-range="24h">24—á</button>
                                <button class="time-btn" data-range="7d">7–¥</button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="moistureChart"></canvas>
                        </div>
                        <div class="chart-stats">
                            <div class="chart-stat">
                                <span class="label">–°—Ä–µ–¥–Ω—è—è:</span>
                                <span class="value" id="avgMoisture">--%</span>
                            </div>
                            <div class="chart-stat">
                                <span class="label">–ú–∏–Ω:</span>
                                <span class="value" id="minMoisture">--%</span>
                            </div>
                            <div class="chart-stat">
                                <span class="label">–ú–∞–∫—Å:</span>
                                <span class="value" id="maxMoisture">--%</span>
                            </div>
                            <div class="chart-stat">
                                <span class="label">–¢—Ä–µ–Ω–¥:</span>
                                <span class="value trend-up" id="moistureTrendValue">‚Üó –†–æ—Å—Ç</span>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="controls-container">
                        <h2><i class="fas fa-sliders-h"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h2>
                        <div class="controls-grid">
                            <div class="control-group">
                                <h3><i class="fas fa-cogs"></i> –ê–≤—Ç–æ–ø–æ–ª–∏–≤</h3>
                                <div class="toggle-switch">
                                    <label>
                                        <input type="checkbox" id="autoWateringToggle" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-label">–ê–≤—Ç–æ–ø–æ–ª–∏–≤ –≤–∫–ª—é—á–µ–Ω</span>
                                    </label>
                                </div>
                                
                                <div class="slider-control">
                                    <label for="moistureThreshold">–ü–æ—Ä–æ–≥ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏:</label>
                                    <div class="slider-wrapper">
                                        <input type="range" id="moistureThreshold" min="10" max="90" value="50" class="slider">
                                        <span class="slider-value" id="thresholdValue">50%</span>
                                    </div>
                                </div>
                                
                                <div class="number-input">
                                    <label for="pumpDuration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–∏–≤–∞ (—Å–µ–∫):</label>
                                    <input type="number" id="pumpDuration" min="1" max="600" value="10">
                                </div>
                                
                                <div class="number-input">
                                    <label for="checkInterval">–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–∏–Ω):</label>
                                    <input type="number" id="checkInterval" min="1" max="60" value="10">
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <h3><i class="fas fa-hand-paper"></i> –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                                <div class="manual-controls">
                                    <button class="control-btn pump-btn" id="manualPumpBtn">
                                        <i class="fas fa-water"></i>
                                        <span>–í–∫–ª—é—á–∏—Ç—å –Ω–∞—Å–æ—Å</span>
                                    </button>
                                    <button class="control-btn light-btn" id="manualLightBtn">
                                        <i class="fas fa-lightbulb"></i>
                                        <span>–í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç</span>
                                    </button>
                                    <div class="timer-control">
                                        <label>–¢–∞–π–º–µ—Ä (—Å–µ–∫):</label>
                                        <input type="number" id="manualTimer" min="5" max="300" value="10">
                                    </div>
                                </div>
                                
                                <div class="pump-block">
                                    <h4><i class="fas fa-ban"></i> –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–∏–≤–∞</h4>
                                    <div class="time-inputs">
                                        <div class="time-input">
                                            <label>–°:</label>
                                            <input type="time" id="blockStart" value="23:00">
                                        </div>
                                        <div class="time-input">
                                            <label>–î–æ:</label>
                                            <input type="time" id="blockEnd" value="08:00">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="right-column">
                    <!-- System Status -->
                    <div class="status-container">
                        <h2><i class="fas fa-heartbeat"></i> –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
                        <div class="status-list">
                            <div class="status-item" id="arduinoStatusItem">
                                <i class="fas fa-microchip"></i>
                                <span>Arduino UNO</span>
                                <span class="status-badge" id="arduinoStatus">–û—Ñ–ª–∞–π–Ω</span>
                            </div>
                            <div class="status-item" id="wifiStatusItem">
                                <i class="fas fa-wifi"></i>
                                <span>WiFi –º–æ–¥—É–ª—å</span>
                                <span class="status-badge" id="wifiStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                            <div class="status-item" id="sensorStatusItem">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>–î–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏</span>
                                <span class="status-badge" id="sensorStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                            <div class="status-item" id="rtcStatusItem">
                                <i class="fas fa-clock"></i>
                                <span>–ß–∞—Å—ã RTC</span>
                                <span class="status-badge" id="rtcStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                        </div>
                        
                        <div class="time-sync">
                            <h4><i class="fas fa-clock"></i> –°–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è</h4>
                            <div class="current-time" id="currentTime">--:--:--</div>
                            <button class="sync-btn" id="syncTimeBtn">
                                <i class="fas fa-sync-alt"></i> –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                        </div>
                    </div>

                    <!-- Statistics -->
                    <div class="stats-container">
                        <h2><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-title">–ü–æ–ª–∏–≤–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                                    <div class="stat-number" id="wateringsToday">0</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-sun"></i>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-title">–ß–∞—Å–æ–≤ —Å–≤–µ—Ç–∞</div>
                                    <div class="stat-number" id="lightHours">0</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-title">–≠–∫–æ–Ω–æ–º–∏—è –≤–æ–¥—ã</div>
                                    <div class="stat-number" id="waterSaved">0–ª</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-title">–î–Ω–µ–π —Ä–∞–±–æ—Ç—ã</div>
                                    <div class="stat-number" id="daysRunning">1</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-stats">
                            <div class="progress-item">
                                <div class="progress-header">
                                    <span>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª–∏–≤–∞</span>
                                    <span id="efficiencyValue">85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="progress-item">
                                <div class="progress-header">
                                    <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã</span>
                                    <span id="systemLoad">42%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 42%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Telegram Notifications -->
                    <div class="telegram-container">
                        <div class="telegram-header">
                            <h2><i class="fab fa-telegram"></i> Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                            <label class="switch small">
                                <input type="checkbox" id="telegramToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="telegram-info">
                            <p><i class="fas fa-robot"></i> –ë–æ—Ç: @EcoGrow_assis_Bot</p>
                            <p><i class="fas fa-bell"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã</p>
                        </div>
                        
                        <div class="notification-types">
                            <label class="checkbox-label">
                                <input type="checkbox" checked> –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked> –ù–∞—á–∞–ª–æ –ø–æ–ª–∏–≤–∞
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked> –û—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox"> –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç
                            </label>
                        </div>
                        
                        <button class="test-notification-btn" id="testNotificationBtn">
                            <i class="fas fa-paper-plane"></i> –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                        </button>
                    </div>

                    <!-- Error History -->
                    <div class="errors-container">
                        <div class="errors-header">
                            <h2><i class="fas fa-exclamation-triangle"></i> –ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫</h2>
                            <button class="clear-btn" id="clearErrorsBtn">
                                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å
                            </button>
                        </div>
                        
                        <div class="errors-list" id="errorsList">
                            <!-- Errors will be dynamically added here -->
                        </div>
                        
                        <div class="no-errors" id="noErrors">
                            <i class="fas fa-check-circle"></i>
                            <p>–û—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Auto Light Schedule -->
            <div class="schedule-container">
                <h2><i class="fas fa-calendar-alt"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏—è</h2>
                <div class="schedule-controls">
                    <div class="schedule-input">
                        <label>–ù–∞—á–∞–ª–æ –æ—Å–≤–µ—â–µ–Ω–∏—è:</label>
                        <input type="time" id="lightStartTime" value="08:00">
                    </div>
                    <div class="schedule-input">
                        <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å—ã):</label>
                        <input type="number" id="lightDuration" min="1" max="24" value="12">
                    </div>
                    <button class="apply-btn" id="applyScheduleBtn">
                        <i class="fas fa-check"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                    </button>
                </div>
                
                <div class="schedule-visual">
                    <div class="timeline">
                        <div class="light-period" id="lightPeriod"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>EcoGrow Assistant v4.5</h3>
                    <p>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª–∏–≤–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º</p>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> zhenya.kupchenya@mail.ru</p>
                        <p><i class="fab fa-telegram"></i> @Zhesny</p>
                        <p><i class="fas fa-graduation-cap"></i> –£—á–µ–Ω–∏–∫ 9 –∫–ª–∞—Å—Å–∞</p>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h4>–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h4>
                    <a href="#"><i class="fas fa-book"></i> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a>
                    <a href="#"><i class="fas fa-code"></i> –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥</a>
                    <a href="#"><i class="fas fa-question-circle"></i> –ü–æ–º–æ—â—å</a>
                    <a href="#"><i class="fas fa-bug"></i> –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ</a>
                </div>
                
                <div class="system-info">
                    <h4>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p>–í–µ—Ä—Å–∏—è –ø—Ä–æ—à–∏–≤–∫–∏: 4.5.1</p>
                    <p>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastSystemUpdate">--</span></p>
                    <p>–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ RAM: <span id="ramUsage">--</span></p>
                    <p>–ê–ø—Ç–∞–π–º: <span id="uptime">--</span></p>
                </div>
            </div>
            
            <div class="copyright">
                <p>¬© 2024 EcoGrow Assistant. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –ö—É–ø—á–µ–Ω—è –ï–≤–≥–µ–Ω–∏–µ–º. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <!-- Toast Notifications -->
    <div id="toastContainer"></div>

    <!-- Modals -->
    <div class="modal" id="sleepModeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-moon"></i> –†–µ–∂–∏–º —Å–Ω–∞</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—É –≤ —Ä–µ–∂–∏–º —Å–Ω–∞? –í—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –æ—Ç–∫–ª—é—á–µ–Ω—ã.</p>
                <div class="modal-input">
                    <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞ (—á–∞—Å—ã):</label>
                    <input type="number" id="sleepDuration" min="1" max="24" value="8">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-danger" id="confirmSleepBtn">–í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Å–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Firebase Initialization -->
    <script src="firebase.js"></script>
    
    <!-- Main Application Script -->
    <script src="app.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è) -->
    <script>
        // –§–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        let appInitialized = false;
        
        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initializeApp() {
            if (appInitialized) {
                console.warn('‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
                return;
            }
            
            console.log('üìÑ –ó–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            appInitialized = true;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Chart.js
            if (typeof Chart === 'undefined') {
                console.error('‚ùå Chart.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Firebase
            if (!window.firebase || !window.firebase.database) {
                console.warn('‚ö†Ô∏è Firebase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º');
                window.ecoGrowApp = new EcoGrowApp();
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            window.ecoGrowApp = new EcoGrowApp();
        }
        
        // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                console.log('‚úÖ DOM –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω');
                setTimeout(initializeApp, 100);
            });
        } else {
            console.log('‚úÖ DOM —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            setTimeout(initializeApp, 100);
        }
    </script>
</body>
</html>
